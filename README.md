# Высокочастотный Арбитражный Крипто-Робот

Этот проект представляет собой торгового робота для поиска и фиксации арбитражных возможностей между криптовалютными биржами OKX и Bybit.

## Описание

Робот в реальном времени подключается к биржам OKX и Bybit с использованием технологии WebSocket, получая мгновенные обновления цен по нескольким торговым парам. Он анализирует поток цен, находит разницу, достаточную для получения прибыли после уплаты торговых комиссий, и логирует найденные возможности.

**Текущий статус:** Проект находится на стадии **"Paper Trading" (Бумажная торговля)**. Робот успешно находит и регистрирует прибыльные сделки, но не исполняет их с использованием реальных средств. Это позволяет безопасно оценивать эффективность стратегии.

## Архитектура и Разработки

- **Real-Time Движок:** Ядро робота построено на `asyncio` для обеспечения высокопроизводительной асинхронной работы.
- **WebSocket Коннекторы:** Разработаны отдельные, отказоустойчивые коннекторы для OKX и Bybit (`connectors/`), использующие нативное подключение через библиотеку `websockets`.
- **Автоматическое переподключение:** Коннекторы способны самостоятельно восстанавливать соединение в случае его обрыва, что обеспечивает стабильную долговременную работу.
- **Мультивалютная стратегия:** Робот одновременно отслеживает несколько торговых пар (в данный момент: `SOL/USDT`, `MATIC/USDT`, `DOGE/USDT`, `TON/USDT`, `TAC/USDT`). Список легко расширяется в `config/settings.py`.
- **Логика арбитража:** Стратегия (`strategies/arbitrage_strategy.py`) учитывает торговые комиссии "тейкера" для расчета чистой прибыли.
- **"Бумажная торговля":** Все найденные прибыльные сделки записываются в лог-файл `paper_trades.log` для последующего анализа.
- **"Пульс" системы:** Робот периодически выводит в консоль статус своей работы и последние полученные цены, что позволяет легко мониторить его состояние.

## Как использовать

1.  **Установка зависимостей:**
    ```bash
    pip install -r requirements.txt
    ```

2.  **Конфигурация:**
    Все основные параметры находятся в файле `config/settings.py`. Вы можете изменить список отслеживаемых пар `TRADING_PAIRS` или минимальный порог прибыли `MIN_PROFIT_THRESHOLD`.

    **API-ключи:** Для работы с приватными функциями бирж (например, проверка баланса, реальная торговля) необходимо установить API-ключи как переменные окружения. Это обеспечивает безопасность и предотвращает случайную публикацию ключей.

    Пример установки переменных окружения (для Linux/macOS):
    ```bash
    export OKX_API_KEY="ВАШ_КЛЮЧ_OKX"
    export OKX_SECRET_KEY="ВАШ_СЕКРЕТ_OKX"
    export OKX_PASSPHRASE="ВАША_ФРАЗА_OKX"
    export BYBIT_API_KEY="ВАШ_КЛЮЧ_BYBIT"
    export BYBIT_API_SECRET="ВАШ_СЕКРЕТ_BYBIT"
    ```
    Для постоянного использования добавьте эти строки в ваш `.bashrc`, `.zshrc` или используйте файл `.env` с библиотекой `python-dotenv`.

    *На данном этапе "бумажной торговли" API-ключи не требуются для запуска основного робота, но необходимы для `check_balance.py`.*
3.  **Запуск робота:**
    ```bash
    python3 live_trader.py
    ```

4.  **Мониторинг:**
    - Наблюдайте за выводом в консоли. Периодический "пульс" будет информировать вас о работе, а найденные сделки будут выведены как `!!! PAPER TRADE !!!`.
    - Анализируйте полную историю найденных сделок в файле `paper_trades.log`.

## Структура проекта

```
/
├── config/               # Файлы конфигурации
│   └── settings.py
├── connectors/           # Модули для подключения к биржам
│   ├── okx_connector.py
│   └── bybit_connector.py
├── strategies/           # Логика торговых стратегий
│   └── arbitrage_strategy.py
├── data/                 # Исторические данные (для бэктестинга)
├── logs/                 # Логи робота (пока не используется)
├── live_trader.py        # Главный исполняемый файл для real-time торговли
├── paper_trades.log      # Лог найденных прибыльных сделок
└── README.md             # Этот файл
```

## Возможные дальнейшие шаги

- **Фаза 5: Реальная торговля и Управление рисками:**
  - Интеграция API-ключей для работы с приватной частью API.
  - Реализация функции проверки реальных балансов перед сделкой.
  - Добавление логики исполнения ордеров.
- **Автоматическая ребалансировка:** Создание модуля для автоматического перевода средств между биржами для поддержания торговых балансов.
- **Дельта-нейтральное хеджирование:** Реализация продвинутой стратегии управления рыночным риском с использованием фьючерсных контрактов.
